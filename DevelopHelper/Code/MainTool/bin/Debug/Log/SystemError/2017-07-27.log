2017-07-27 17:37:08,970 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:a3fde96f-4b95-4564-a2c9-8762866cad95
Error Number:3169,State:1,Class:16
2017-07-27 17:40:04,408 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
正在回滚不合法事务。估计回滚已完成: 0%。
正在回滚不合法事务。估计回滚已完成: 100%。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:d0298b5b-087c-4fd2-8874-383a3d3d4195
Error Number:5170,State:1,Class:16
2017-07-27 17:40:10,568 [T:5] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:d0298b5b-087c-4fd2-8874-383a3d3d4195
Error Number:5170,State:1,Class:16
2017-07-27 17:40:12,759 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:d0298b5b-087c-4fd2-8874-383a3d3d4195
Error Number:5170,State:1,Class:16
2017-07-27 17:40:33,283 [T:7] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:cdddc5b5-6a8f-4509-8a4b-350c14f26d94
Error Number:5170,State:1,Class:16
2017-07-27 17:40:41,459 [T:8] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:d0298b5b-087c-4fd2-8874-383a3d3d4195
Error Number:5170,State:1,Class:16
2017-07-27 17:41:14,671 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:cea49587-864a-4b5a-ac65-debc5c049466
Error Number:5170,State:1,Class:16
2017-07-27 17:41:17,672 [T:5] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:b4def864-2c19-48dd-80c5-f77f3bc00ab7
Error Number:5170,State:1,Class:16
2017-07-27 17:41:18,247 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:cea49587-864a-4b5a-ac65-debc5c049466
Error Number:5170,State:1,Class:16
2017-07-27 17:41:18,680 [T:5] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:b4def864-2c19-48dd-80c5-f77f3bc00ab7
Error Number:5170,State:1,Class:16
2017-07-27 17:41:19,080 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:cea49587-864a-4b5a-ac65-debc5c049466
Error Number:5170,State:1,Class:16
2017-07-27 17:41:19,503 [T:5] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 无法创建文件 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf'，因为它已存在。请更改文件路径或文件名，然后重试此操作。
CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
用户没有更改数据库 'dotNet_erp60_Lianjia' 的权限，该数据库不存在，或数据库未处于允许访问检查的状态。
ALTER DATABASE 语句失败。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:b4def864-2c19-48dd-80c5-f77f3bc00ab7
Error Number:5170,State:1,Class:16
2017-07-27 17:42:57,225 [T:4] [L:ERROR] [C:LogWriter.Error] [P:D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\Common\LogWriter.cs-36] - USE master

--关闭数据库的引用
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    ALTER DATABASE [dotNet_erp60_Lianjia] SET OFFLINE WITH ROLLBACK IMMEDIATE;

--如果要创建的数据库已经存在，那么删除它
IF EXISTS ( SELECT  name
            FROM    master.dbo.sysdatabases
            WHERE   name = N'dotNet_erp60_Lianjia' )
    DROP DATABASE [dotNet_erp60_Lianjia]

--创建一个新数据库，要指定新建数据库的数据文件和日志文件的名称和位置，初始化大小增长幅度，最大值等内容

CREATE DATABASE [dotNet_erp60_Lianjia] ON 

( NAME = N'dotNet_erp60_Lianjia_Data',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Data.mdf',

   SIZE = 5MB,

   MAXSIZE = 50MB,

   FILEGROWTH = 5MB ) LOG ON

( NAME = N'dotNet_erp60_Lianjia_Log',

   FILENAME = N'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia_Log.ldf',

   SIZE = 5MB,

   MAXSIZE = 25MB,

   FILEGROWTH = 5MB )

--把指定的数据库备份文件恢复到刚刚建立的数据库里，这里要指定数据库备份文件的位置

--以及要恢复到的数据库，因为备份文件来自未知的机器，备份的时候原数据库和新数据库

--的数据文件和日志文件的位置不匹配，所以要用with move指令来完成强制文件移动，如果

--是通过管理器备份的数据库文件，数据库文件和日志文件名分别是数据库名跟上_Data或

--_Log，这是一个假设哦，如果不是这样，脚本有可能会出错

RESTORE DATABASE [dotNet_erp60_Lianjia]

   FROM DISK = 'E:\MySoft\01Projects\链家\数据库\备份\2017-07-25\dotNet_erp60_Lianjia.bak'

WITH  FILE = 1,

      MOVE 'myscrm_defaultorganization' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.mdf', 

      MOVE 'myscrm_defaultorganization_log' TO 'E:\MySoft\01Projects\Database\dotNet_erp60_Lianjia.ldf',

      NOUNLOAD, 

      REPLACE, 

      STATS = 10

--打开数据库的引用
ALTER DATABASE [dotNet_erp60_Lianjia] set ONLINE;

System.Data.SqlClient.SqlException (0x80131904): 该数据库是在运行版本 12.00.4100 的服务器上备份的。该版本与此服务器(运行版本 11.00.3000)不兼容。请在支持该备份的服务器上还原该数据库，或者使用与此服务器兼容的备份。
RESTORE DATABASE 正在异常终止。
已将数据库上下文更改为 'master'。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   在 DbHelper.SqlServerHelper.ExecuteNonQuery(String cmdText) 位置 D:\MySoft\02Study\软件开发辅助工具\DevelopHelper\Code\Base\DbHelper\SqlServerHelper.cs:行号 88
ClientConnectionId:3f88fa5c-dd55-4ace-8b5a-239b61d57705
Error Number:3169,State:1,Class:16
